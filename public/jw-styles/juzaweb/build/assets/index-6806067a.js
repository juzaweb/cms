import{r as o,a as n,j as e,b as N}from"./app-b7841ba0.js";import{A as x}from"./admin-5493fc77.js";import T from"./top-options-89f57717.js";import{B as C}from"./button-f7bc13e1.js";import{_ as A,c as B,a as $,b as j,m as p}from"./functions-29bc5ae0.js";import{S as k}from"./success-button-92bcf476.js";import"./select-953a0574.js";import"./react-select.esm-6ed90d4b.js";import"./lodash-47596753.js";const g={text:"Text",textarea:"Textarea",number:"Number",checkbox:"Checkbox",image:"Image",images:"Images"};function M({theme:d,settings:b}){const[m,u]=o.useState(b),[h,i]=o.useState(!1),[r,c]=o.useState(),[f,v]=o.useState([]),S=t=>(t.preventDefault(),u([...m,{name:"",type:"string",value:"",label:"",nameReadonly:!1}]),!1),y=(t,l)=>{if(t.target.value==="")return;let a=B(t.target.value),s=$(a);t.target.value=a,v({...f,[l]:s})},_=t=>{t.preventDefault(),i(!0);let l=new FormData(t.target);return N.put(j(`dev-tools/themes/${d.name}/settings`),l).then().then(a=>{let s=p(a);i(!1),c(s)}).catch(a=>{i(!1),c(p(a))}),setTimeout(()=>{c(void 0)},2e3),!1};return n(x,{children:[e(T,{moduleType:"themes",moduleSelected:`themes/${d.name}`,optionSelected:"settings"}),e("div",{className:"row",children:n("div",{className:"col-md-12",children:[(r==null?void 0:r.message)&&e("div",{className:`alert alert-${r.status?"success":"danger"} jw-message`,children:r.message}),n("form",{method:"POST",onSubmit:_,autoComplete:"off",children:[n("table",{className:"table table-hover",children:[e("thead",{children:n("tr",{children:[e("th",{style:{width:"20%"},children:"Config"}),e("th",{children:"Lable"}),e("th",{children:"Type"}),e("th",{children:"Actions"})]})}),e("tbody",{children:m.map((t,l)=>n("tr",{children:[e("td",{children:e("input",{type:"text",className:"form-control",name:`settings[${l}][name]`,defaultValue:t.name,readOnly:t.nameReadonly,onBlur:a=>y(a,l)})}),e("td",{children:e("input",{type:"text",className:"form-control",name:`settings[${l}][label]`,defaultValue:f[l]||t.label})}),e("td",{children:e("select",{name:`settings[${l}][type]`,className:"form-control",defaultValue:t.type,children:Object.keys(g).map((a,s)=>e("option",{value:a,children:g[a]},s))})}),e("td",{children:n("a",{href:"#",className:"text-danger",onClick:()=>u(m.filter((a,s)=>s!==l)),children:[e("i",{className:"fa fa-trash"})," ",A("Remove")]})})]},l))})]}),e(C,{label:"Add Setting",onClick:S,loading:h}),e(k,{type:"submit",label:"Save Changes",loading:h})]})]})})]})}export{M as default};
