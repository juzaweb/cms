import{r as o,a as s,j as e,b as _}from"./app-2d01f232.js";import{A as N}from"./admin-1fc15e48.js";import T from"./top-options-19605be4.js";import{B as C}from"./button-b1936e8c.js";import{_ as A,c as B,b as $,a as j,m as f}from"./functions-d556270f.js";import{S as k}from"./success-button-fd9f510c.js";import"./select-9b1f74ae.js";import"./react-select.esm-ac3b7f90.js";const g={text:"Text",textarea:"Textarea",number:"Number",checkbox:"Checkbox",image:"Image",images:"Images"};function E({theme:d,settings:b}){const[i,u]=o.useState(b),[h,m]=o.useState(!1),[r,c]=o.useState(),[p,v]=o.useState([]),S=t=>(t.preventDefault(),u([...i,{name:"",type:"string",value:"",label:"",nameReadonly:!1}]),!1),y=(t,l)=>{if(t.target.value==="")return;let a=B(t.target.value),n=$(a);t.target.value=a,v({...p,[l]:n})},x=t=>{t.preventDefault(),m(!0);let l=new FormData(t.target);return _.put(j(`dev-tools/themes/${d.name}/settings`),l).then().then(a=>{let n=f(a);m(!1),c(n)}).catch(a=>{m(!1),c(f(a))}),setTimeout(()=>{c(void 0)},2e3),!1};return s(N,{children:[e(T,{moduleType:"themes",moduleSelected:`themes/${d.name}`,optionSelected:"settings"}),e("div",{className:"row",children:s("div",{className:"col-md-12",children:[(r==null?void 0:r.message)&&e("div",{className:`alert alert-${r.status?"success":"danger"} jw-message`,children:r.message}),s("form",{method:"POST",onSubmit:x,autoComplete:"off",children:[s("table",{className:"table table-hover",children:[e("thead",{children:s("tr",{children:[e("th",{style:{width:"20%"},children:"Config"}),e("th",{children:"Lable"}),e("th",{children:"Type"}),e("th",{children:"Actions"})]})}),e("tbody",{children:i.map((t,l)=>s("tr",{children:[e("td",{children:e("input",{type:"text",className:"form-control",name:`settings[${l}][name]`,defaultValue:t.name,readOnly:t.nameReadonly,onBlur:a=>y(a,l)})}),e("td",{children:e("input",{type:"text",className:"form-control",name:`settings[${l}][label]`,defaultValue:p[l]||t.label})}),e("td",{children:s("select",{name:`settings[${l}][type]`,className:"form-control",defaultValue:t.type,children:[Object.keys(g).map((a,n)=>e("option",{value:a,children:g[a]},n)),e("option",{value:"text",children:"Text"}),e("option",{value:"textarea",children:"Textarea"}),e("option",{value:"number",children:"Number"}),e("option",{value:"image",children:"Image"})]})}),e("td",{children:s("a",{href:"#",className:"text-danger",onClick:()=>u(i.filter((a,n)=>n!==l)),children:[e("i",{className:"fa fa-trash"})," ",A("Remove")]})})]},l))})]}),e(C,{label:"Add Setting",onClick:S,loading:h}),e(k,{type:"submit",label:"Save Changes",loading:h})]})]})})]})}export{E as default};
